---
import { CVIX_WEBAPP_URL } from "astro:env/client";
import { Footer, BaseLayout as Layout } from "@cvix/astro-ui";
import Button from "@cvix/astro-ui/components/ui/button/Button.astro";
import type { Lang } from "@cvix/i18n/astro";
import { getOgImagePath } from "@cvix/lib";
import CTA from "@/components/sections/CTA.astro";
import FAQ from "@/components/sections/FAQ.astro";
import Feature from "@/components/sections/Feature.astro";
import Hero from "@/components/sections/Hero.astro";
import TargetAudience from "@/components/sections/TargetAudience.astro";
import TemplateShowcase from "@/components/sections/TemplateShowcase.astro";
import TrustMetrics from "@/components/sections/TrustMetrics.astro";
import { LOCALES, useTranslations } from "@/i18n";
import { footerNavLinks } from "@/models/menu";

const locale = Astro.currentLocale as Lang;
const t = useTranslations(locale);

export const getStaticPaths = () =>
	Object.keys(LOCALES).map((lang) => ({
		params: { lang },
	}));

// SEO structured data for SoftwareApplication
const structuredData = {
	"@context": "https://schema.org",
	"@type": "SoftwareApplication",
	name: "ProfileTailors",
	applicationCategory: "BusinessApplication",
	description: t("home.description"),
	operatingSystem: "Web Browser",
	offers: {
		"@type": "Offer",
		price: "0",
		priceCurrency: "USD",
	},
};
const ogImage = new URL(getOgImagePath(Astro.url.pathname), Astro.url.origin)
	.href;
const og = {
	image: ogImage,
	xAccount: "@yacosta738",
};
---

<Layout title={t("home.title")} description={t("home.description")} {og}>
  <Button slot="header-cta" href={`${CVIX_WEBAPP_URL}/login`} class="hidden md:inline-flex">
    {
      t({
        en: "Get Started",
        es: "Comenzar",
      })
    }
  </Button>

  <script is:inline type="application/ld+json" set:html={JSON.stringify(structuredData)} />
  <Hero />
  <TargetAudience />
  <TemplateShowcase />
  <TrustMetrics />
  <Feature />
  <FAQ />
  <CTA />
  <Footer links={footerNavLinks(Astro.currentLocale as Lang)}/>
</Layout>
