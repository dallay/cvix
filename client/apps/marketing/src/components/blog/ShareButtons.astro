---
import { Icon } from "astro-icon/components";
import { cn } from "@cvix/ui/lib/utils";

interface Props {
  url: string;
  title: string;
  description?: string;
  class?: string;
}

const { url, title, description, class: className } = Astro.props;

const encodedUrl = encodeURIComponent(url);
const encodedTitle = encodeURIComponent(title);
const encodedDescription = encodeURIComponent(description || "");

const shareLinks = [
  {
    name: "Twitter",
    icon: "tabler:brand-twitter",
    url: `https://twitter.com/intent/tweet?url=${encodedUrl}&text=${encodedTitle}`,
  },
  {
    name: "LinkedIn",
    icon: "tabler:brand-linkedin",
    url: `https://www.linkedin.com/shareArticle?mini=true&url=${encodedUrl}&title=${encodedTitle}&summary=${encodedDescription}`,
  },
  {
    name: "Facebook",
    icon: "tabler:brand-facebook",
    url: `https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}`,
  },
];
---

<div class={cn("flex items-center gap-2", className)}>
  <span class="text-sm font-medium text-muted-foreground mr-2">Share:</span>
  {
    shareLinks.map((link) => (
      <a
        href={link.url}
        target="_blank"
        rel="noopener noreferrer"
        class="p-2 rounded-full bg-muted hover:bg-primary hover:text-primary-foreground transition-colors"
        aria-label={`Share on ${link.name}`}
      >
        <Icon name={link.icon} class="w-4 h-4" />
      </a>
    ))
  }
</div>
