# IMPORTANT: Environment Variable Files Overview
#
#
# **Canonical variable list:**
#   - The authoritative list of all required and optional environment variables is maintained in the project documentation.
#   - See: `docs/` site or the main README for details and explanations of each variable.
#
# Copy this file to `.env` and replace placeholders with real values for your environment.
# Do NOT commit any real secrets or credentials. Use secret stores for production.

# ----------------------------
# Docker / Compose / Local Build
# ----------------------------
COMPOSE_PATH_SEPARATOR=:
COMPOSE_FILE=postgresql-compose.yml:docker-compose.yml
# ----------------------------
# General / App URLs
# ----------------------------
# Application identifiers and base URLs used across services and frontends
APP_NAME=ProFileTailors
HOSTNAME=localhost
BACKEND_URL=http://localhost:8080
OAUTH2_SERVER_URL=http://localhost:9080

# Public URLs used by marketing/web builds (non-sensitive)
# Used by client/apps/marketing and other build scripts
PUBLIC_SITE_URL=https://example.com
PUBLIC_BASE_URL_PROD=https://example.com
PUBLIC_BASE_DOCS_URL_PROD=https://docs.example.com
PUBLIC_BASE_WEBAPP_URL_PROD=https://app.example.com

# ----------------------------
# Database (PostgreSQL)
# ----------------------------
# Reactive DB URL used by backend (R2DBC). Example uses local postgres.
DATABASE_URL=r2dbc:postgresql://localhost:5432/postgres
# The application may source the username/password from POSTGRESQL_* vars below.
DATABASE_USERNAME=${POSTGRESQL_USER}
DATABASE_PASSWORD=${POSTGRESQL_PASSWORD}

# Container-local postgres credentials (development only)
POSTGRESQL_USER=postgres
POSTGRESQL_PASSWORD=postgres
POSTGRESQL_DB=postgres
POSTGRESQL_VERSION=16.9-alpine

# ----------------------------
# Keycloak / Authentication
# ----------------------------
# Hostnames and admin credentials used by local Keycloak and integration helpers.
# These values are examples only. Do NOT use real admin passwords in VCS.
KEYCLOAK_URL=localhost
KC_HOSTNAME=localhost
KEYCLOAK_VERSION=24.0
KC_HTTP_PORT=6080
KC_HTTPS_PORT=6443

REALM=your-realm
CLIENT_ID=your-client-id
CLIENT_SECRET=your-client-secret

# Keycloak admin user used for test and local setup (example values)
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=secret

# Admin/realm settings referenced by server/engine/application.yml
ADMIN_CLIENT_ID=admin-cli
ADMIN_REALM=master
ADMIN_REALM_USERNAME=admin
# Replace with a secure password in your deploy environment (not checked-in)
ADMIN_REALM_PASSWORD=your-admin-password

# ----------------------------
# CORS (server configuration)
# ----------------------------
# These are used by server/engine/src/main/resources/application.yml if set.
# Provide comma-separated lists where applicable.
CORS_ALLOWED_ORIGINS=http://localhost:5173,https://app.example.com
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Authorization,Content-Type,Accept,Origin,Access-Control-Request-Method,Access-Control-Request-Headers,X-Requested-With,X-Xsrf-Token,X-New-Header
CORS_EXPOSED_HEADERS=Access-Control-Allow-Origin,Access-Control-Allow-Credentials
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=3600

# ----------------------------
# Service Versions & Helpers
# ----------------------------
GREENMAIL_VERSION=2.0.0

# ----------------------------
# SSL / Keystore (example)
# ----------------------------
# Used by local dev scripts that build or use an application keystore
SSL_KEY_ALIAS=ProFileTailors
SSL_KEYSTORE_PASSWORD=changeit
SSL_KEYSTORE_LOCATION=file:infra/ssl/keystore.jks

# ----------------------------
# Tokens & External Keys (DO NOT COMMIT REAL SECRETS)
# ----------------------------
# Replace with secure values via secret manager or CI env. These placeholders are examples only.
SENDGRID_API_KEY=YOUR_API_KEY

# ----------------------------
# PDF Generation (resume/document rendering)
# ----------------------------
# Docker image for PDF generation (texlive recommended)
PDF_DOCKER_IMAGE=texlive/texlive:TL2024-historic
# Max concurrent PDF containers (default: 10)
PDF_MAX_CONCURRENT_CONTAINERS=10
# PDF generation timeout in seconds (default: 30)
PDF_TIMEOUT_SECONDS=30
# PDF container memory limit in MB (default: 512)
PDF_MEMORY_LIMIT_MB=512
# PDF container CPU quota (default: 0.5)
PDF_CPU_QUOTA=0.5
# ----------------------------
# Development-only toggles
# ----------------------------
# Some flags are only used for local/test convenience
# Set to true to persist LaTeX build artifacts (dev only)
PERSIST_LATEX_FILES=false

# Spring profile used by the backend (dev/test/prod)
SPRING_PROFILES_ACTIVE=dev

# SMTP Configuration for Development
SMTP_HOST=localhost
SMTP_PORT=3025
SMTP_USERNAME=developer
SMTP_PASSWORD=secret
SMTP_FROM_EMAIL=noreply@cvix.local
SMTP_FROM_NAME="ProFileTailors Development"

# ----------------------------
# Notes & Next Steps
# ----------------------------
# - Keep `.env` out of version control. Add it to `.gitignore` if not already ignored.
# - For production, load secrets from a secret manager (Vault, AWS Secrets Manager, GitHub Secrets, etc.).
# - The marketing frontend has its own `.env.example` at: client/apps/marketing/.env.example
# - If you want, I can add a short README snippet showing how to safely create `.env` files per-environment.

# Resume Template Configuration
# Template source types (in order of priority - first wins on ID conflicts)
# Free tier: [CLASSPATH]
# Premium tier: [FILESYSTEM, CLASSPATH]
# Local filesystem path for resume templates (used if FILESYSTEM is in TEMPLATE_SOURCE_TYPES)
TEMPLATE_SOURCE_PATH=/path/to/your/local/templates/resume
TEMPLATE_SOURCE_TYPES="CLASSPATH,FILESYSTEM"

# ----------------------------
# Waitlist / Privacy
# ----------------------------
# Secret key for HMAC-SHA256 IP hashing. Must be kept secret.
# In production, use a long random string (e.g., 64 chars hex).
# Generate one with: openssl rand -hex 32
WAITLIST_IP_HMAC_SECRET=your-secure-random-secret-here
