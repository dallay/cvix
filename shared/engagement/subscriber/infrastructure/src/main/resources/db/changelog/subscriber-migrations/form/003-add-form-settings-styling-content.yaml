databaseChangeLog:
  - changeSet:
      id: add-form-settings-styling-content-columns
      author: system
      comment: Add columns for form settings, styling, and content configuration
      changes:
        # ==================== SETTINGS ====================
        - addColumn:
            tableName: subscription_forms
            columns:
              - column:
                  name: success_action_type
                  type: varchar(20)
                  defaultValue: 'SHOW_MESSAGE'
                  constraints:
                    nullable: false
              - column:
                  name: success_message
                  type: text
                  constraints:
                    nullable: true
              - column:
                  name: redirect_url
                  type: varchar(500)
                  constraints:
                    nullable: true

        # ==================== STYLING ====================
        - addColumn:
            tableName: subscription_forms
            columns:
              - column:
                  name: border_color
                  type: varchar(7)
                  defaultValue: '#000000'
                  constraints:
                    nullable: false
              - column:
                  name: border_style
                  type: varchar(20)
                  defaultValue: 'solid'
                  constraints:
                    nullable: false
              - column:
                  name: shadow
                  type: varchar(20)
                  defaultValue: 'none'
                  constraints:
                    nullable: false
              - column:
                  name: border_thickness
                  type: int
                  defaultValue: 0
                  constraints:
                    nullable: false
              - column:
                  name: form_width
                  type: varchar(20)
                  defaultValue: 'auto'
                  constraints:
                    nullable: false
              - column:
                  name: form_height
                  type: varchar(20)
                  defaultValue: 'auto'
                  constraints:
                    nullable: false
              - column:
                  name: horizontal_alignment
                  type: varchar(20)
                  defaultValue: 'center'
                  constraints:
                    nullable: false
              - column:
                  name: vertical_alignment
                  type: varchar(20)
                  defaultValue: 'center'
                  constraints:
                    nullable: false
              - column:
                  name: padding
                  type: int
                  defaultValue: 16
                  constraints:
                    nullable: false
              - column:
                  name: gap
                  type: int
                  defaultValue: 16
                  constraints:
                    nullable: false
              - column:
                  name: corner_radius
                  type: int
                  defaultValue: 8
                  constraints:
                    nullable: false

        # ==================== CONTENT ====================
        - addColumn:
            tableName: subscription_forms
            columns:
              - column:
                  name: show_header
                  type: boolean
                  defaultValue: true
                  constraints:
                    nullable: false
              - column:
                  name: show_subheader
                  type: boolean
                  defaultValue: true
                  constraints:
                    nullable: false
              - column:
                  name: header_title
                  type: varchar(120)
                  defaultValue: 'Join our newsletter'
                  constraints:
                    nullable: false
              - column:
                  name: subheader_text
                  type: varchar(255)
                  constraints:
                    nullable: true
              - column:
                  name: submit_button_text
                  type: varchar(120)
                  defaultValue: 'Subscribe'
                  constraints:
                    nullable: false
              - column:
                  name: submitting_button_text
                  type: varchar(120)
                  defaultValue: 'Submitting...'
                  constraints:
                    nullable: false
              - column:
                  name: show_tos_checkbox
                  type: boolean
                  defaultValue: false
                  constraints:
                    nullable: false
              - column:
                  name: tos_text
                  type: varchar(500)
                  constraints:
                    nullable: true
              - column:
                  name: show_privacy_checkbox
                  type: boolean
                  defaultValue: false
                  constraints:
                    nullable: false
              - column:
                  name: privacy_text
                  type: varchar(500)
                  constraints:
                    nullable: true

      rollback:
        - dropColumn:
            tableName: subscription_forms
            columnName: success_action_type
        - dropColumn:
            tableName: subscription_forms
            columnName: success_message
        - dropColumn:
            tableName: subscription_forms
            columnName: redirect_url
        - dropColumn:
            tableName: subscription_forms
            columnName: border_color
        - dropColumn:
            tableName: subscription_forms
            columnName: border_style
        - dropColumn:
            tableName: subscription_forms
            columnName: shadow
        - dropColumn:
            tableName: subscription_forms
            columnName: border_thickness
        - dropColumn:
            tableName: subscription_forms
            columnName: form_width
        - dropColumn:
            tableName: subscription_forms
            columnName: form_height
        - dropColumn:
            tableName: subscription_forms
            columnName: horizontal_alignment
        - dropColumn:
            tableName: subscription_forms
            columnName: vertical_alignment
        - dropColumn:
            tableName: subscription_forms
            columnName: padding
        - dropColumn:
            tableName: subscription_forms
            columnName: gap
        - dropColumn:
            tableName: subscription_forms
            columnName: corner_radius
        - dropColumn:
            tableName: subscription_forms
            columnName: show_header
        - dropColumn:
            tableName: subscription_forms
            columnName: show_subheader
        - dropColumn:
            tableName: subscription_forms
            columnName: header_title
        - dropColumn:
            tableName: subscription_forms
            columnName: subheader_text
        - dropColumn:
            tableName: subscription_forms
            columnName: submit_button_text
        - dropColumn:
            tableName: subscription_forms
            columnName: submitting_button_text
        - dropColumn:
            tableName: subscription_forms
            columnName: show_tos_checkbox
        - dropColumn:
            tableName: subscription_forms
            columnName: tos_text
        - dropColumn:
            tableName: subscription_forms
            columnName: show_privacy_checkbox
        - dropColumn:
            tableName: subscription_forms
            columnName: privacy_text
