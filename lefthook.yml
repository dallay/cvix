# @file lefthook.yml
# @ref https://evilmartians.github.io/lefthook/

pre-commit:
  commands:
    biome:
      run: pnpm run lint
    git-update:
      run: git update-index --again
    ruler-apply:
      glob: ".ruler/**/*"
      run: pnpm run ruler:apply
    markdownlint:
      glob: "**/*.{md,mdx}"
      run: npx --no-install markdownlint-cli2 '**/*.{md,mdx}' --config .markdownlint.json

commit-msg:
  commands:
    a_lint:
      run: npx --no-install commitlint --edit

post-commit:
  commands:
    notify_user:
      run: echo "âœ… Commit successful! Don't forget to push your changes."

pre-push:
  parallel: true
  commands:
    pnpm_check:
      run: pnpm run check
    kotlin_static_analysis:
      run: ./gradlew detektAll
    check_secrets:
      run: ./scripts/check-secrets.sh
