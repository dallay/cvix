# Infrastructure-level environment variables for Docker Compose
# Copy this file to `.env` and adjust values for your environment

# ----------------------------
# Application
# ----------------------------
APP_NAME=ProFileTailors
HOSTNAME=localhost
SPRING_PROFILES_ACTIVE=dev

# ----------------------------
# Database (PostgreSQL)
# ----------------------------
POSTGRESQL_USER=postgres
POSTGRESQL_PASSWORD=postgres
POSTGRESQL_DB=postgres
POSTGRESQL_VERSION=16.9-alpine

# Internal database URL (for backend service)
DATABASE_URL=r2dbc:postgresql://postgresql:5432/postgres
DATABASE_USERNAME=${POSTGRESQL_USER}
DATABASE_PASSWORD=${POSTGRESQL_PASSWORD}

# ----------------------------
# Backend Service URLs
# ----------------------------
BACKEND_URL=http://localhost:8080
OAUTH2_SERVER_URL=http://localhost:9080

# ----------------------------
# Keycloak / Authentication
# ----------------------------
KEYCLOAK_VERSION=24.0
KEYCLOAK_URL=localhost
KC_HOSTNAME=localhost
KC_HTTP_PORT=6080
KC_HTTPS_PORT=6443

KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=secret

REALM=your-realm
CLIENT_ID=your-client-id
CLIENT_SECRET=your-client-secret

# Admin client for realm management
ADMIN_CLIENT_ID=admin-cli
ADMIN_REALM=master
ADMIN_REALM_USERNAME=admin
ADMIN_REALM_PASSWORD=your-admin-password

# ----------------------------
# Frontend/Landing Page URLs
# ----------------------------
PUBLIC_SITE_URL=https://example.com
PUBLIC_BASE_URL_PROD=https://example.com
PUBLIC_BASE_DOCS_URL_PROD=https://docs.example.com
PUBLIC_BASE_WEBAPP_URL_PROD=https://app.example.com

# ----------------------------
# CORS Configuration
# ----------------------------
CORS_ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000,https://app.example.com
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Authorization,Content-Type,Accept,Origin,Access-Control-Request-Method,Access-Control-Request-Headers,X-Requested-With,X-Xsrf-Token,X-New-Header
CORS_EXPOSED_HEADERS=Access-Control-Allow-Origin,Access-Control-Allow-Credentials
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=3600

# ----------------------------
# Email / SMTP Configuration
# ----------------------------
SMTP_HOST=localhost
SMTP_PORT=3025
SMTP_USERNAME=developer
SMTP_PASSWORD=secret
SMTP_FROM_EMAIL=noreply@cvix.local
SMTP_FROM_NAME=ProFileTailors Development

# SendGrid API key (optional, for production email)
SENDGRID_API_KEY=YOUR_API_KEY

# ----------------------------
# PDF Generation (LaTeX/Resume rendering)
# ----------------------------
PDF_DOCKER_IMAGE=texlive/texlive:TL2024-historic
PDF_MAX_CONCURRENT_CONTAINERS=10
PDF_TIMEOUT_SECONDS=30
PDF_MEMORY_LIMIT_MB=512
PDF_CPU_QUOTA=0.5
PERSIST_LATEX_FILES=false

# ----------------------------
# SSL / TLS Configuration (optional)
# ----------------------------
SSL_KEY_ALIAS=ProFileTailors
SSL_KEYSTORE_PASSWORD=changeit
SSL_KEYSTORE_LOCATION=file:infra/ssl/keystore.jks

# ----------------------------
# Service Versions
# ----------------------------
GREENMAIL_VERSION=2.0.0

