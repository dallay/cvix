---
/**
 * Input Component (Primitive)
 *
 * This is a low-level primitive component designed to be used with Field + FieldLabel
 * for proper accessibility. Do not use standalone without proper labeling.
 *
 * Accessibility Guidelines:
 * - Always use within <Field> wrapper with <FieldLabel>
 * - Ensure `id` prop matches FieldLabel's `for` attribute
 * - Always provide `name` attribute for form submissions
 * - Add appropriate `type` attribute (text, email, password, etc.)
 *
 * Example Usage:
 * ```astro
 * <Field>
 *   <FieldLabel for="email">Email Address</FieldLabel>
 *   <Input id="email" name="email" type="email" required />
 * </Field>
 * ```
 *
 * Validation States:
 * - Uses `aria-invalid` attribute to style invalid inputs
 * - Automatically styled when validation fails (red border + ring)
 *
 * @see {@link https://www.w3.org/WAI/WCAG21/Understanding/labels-or-instructions.html}
 */
import { cn } from "@cvix/lib";
import type { HTMLAttributes } from "astro/types";

interface Props extends HTMLAttributes<"input"> {}

const { class: className, ...props } = Astro.props;
---

<input
  data-slot="input"
  class={cn(
    "file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
    "focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]",
    "aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
    className
  )}
  {...props}
/>
